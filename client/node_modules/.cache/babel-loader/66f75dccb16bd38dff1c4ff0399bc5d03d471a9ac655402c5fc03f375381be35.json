{"ast":null,"code":"var _jsxFileName = \"/Users/pablodurbano/Documents/ dev/Sprint.9-Ecommerce/client/src/components/Item.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Box, Typography, Button } from \"@mui/material\";\nimport { shades } from \"../theme\";\nimport { addToCart } from \"../state\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Item = _ref => {\n  _s();\n  var _image$data, _image$data$attribute, _image$data$attribute2, _image$data$attribute3;\n  let {\n    item,\n    width\n  } = _ref;\n  // ✅ HOOKS SIEMPRE AL PRINCIPIO - MISMO ORDEN\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const cart = useSelector(state => state.cart.cart);\n  const [isHovered, setIsHovered] = useState(false);\n\n  // ✅ VALIDACIÓN DESPUÉS DE LOS HOOKS\n  if (!item || !item.attributes) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      width: width || \"300px\",\n      position: \"relative\",\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        width: \"380px\",\n        height: \"380px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        backgroundColor: \"#f5f5f5\",\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        mt: \"3px\",\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          color: shades.neutral.dark,\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          children: \"Loading item...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          fontWeight: \"bold\",\n          children: \"\\u20AC --\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }, this);\n  }\n\n  // ✅ DESTRUCTURING SEGURO DESPUÉS DE LA VALIDACIÓN\n  const isItemInCart = cart.some(cartItem => cartItem.id === item.id);\n  const {\n    category = \"Unknown\",\n    price = 0,\n    name = \"Unnamed Item\",\n    image = {}\n  } = item.attributes;\n\n  // ✅ VALIDACIÓN SEGURA PARA LA IMAGEN\n  const imageUrl = image !== null && image !== void 0 && (_image$data = image.data) !== null && _image$data !== void 0 && (_image$data$attribute = _image$data.attributes) !== null && _image$data$attribute !== void 0 && (_image$data$attribute2 = _image$data$attribute.formats) !== null && _image$data$attribute2 !== void 0 && (_image$data$attribute3 = _image$data$attribute2.medium) !== null && _image$data$attribute3 !== void 0 && _image$data$attribute3.url ? `http://localhost:1337${image.data.attributes.formats.medium.url}` : \"/default-image.jpg\";\n  const handleAddToCart = () => {\n    if (!isItemInCart) {\n      dispatch(addToCart({\n        item: {\n          ...item,\n          count: 1\n        }\n      }));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    width: width,\n    position: \"relative\",\n    onMouseEnter: () => setIsHovered(true),\n    onMouseLeave: () => setIsHovered(false),\n    style: {\n      transition: \"transform 0.3s, box-shadow 0.3s\",\n      transform: isHovered ? \"scale(1.05)\" : \"scale(1)\",\n      boxShadow: isHovered ? \"0 1px 2px rgba(0, 0, 0, 0.05)\" : \"none\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      alt: name,\n      width: \"380px\",\n      height: \"380px\",\n      src: imageUrl,\n      onClick: () => navigate(`/item/${item.id}`),\n      style: {\n        cursor: \"pointer\",\n        objectFit: \"cover\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      display: isHovered ? \"flex\" : \"none\",\n      justifyContent: \"space-between\",\n      position: \"absolute\",\n      left: \"55%\",\n      top: \"-10%\",\n      width: \"100%\",\n      padding: \"0 5%\",\n      background: shades.neutral[100],\n      borderRadius: \"3px\",\n      style: {\n        position: \"relative\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleAddToCart,\n        sx: {\n          backgroundColor: isItemInCart ? \"#999999\" : shades.primary[500],\n          color: \"white\",\n          cursor: isItemInCart ? \"default\" : \"pointer\"\n        },\n        disabled: isItemInCart,\n        children: isItemInCart ? \"In Cart\" : \"Add to Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      mt: \"3px\",\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle2\",\n        color: shades.neutral.dark,\n        children: category.replace(/([A-Z])/g, \" $1\").replace(/^./, str => str.toUpperCase())\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        fontWeight: \"bold\",\n        children: [\"\\u20AC \", price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(Item, \"+wK6oegEyvQKIG3MEs8DAs5MMZ0=\", false, function () {\n  return [useNavigate, useDispatch, useSelector];\n});\n_c = Item;\nexport default Item;\nvar _c;\n$RefreshReg$(_c, \"Item\");","map":{"version":3,"names":["React","useState","useDispatch","useSelector","Box","Typography","Button","shades","addToCart","useNavigate","jsxDEV","_jsxDEV","Item","_ref","_s","_image$data","_image$data$attribute","_image$data$attribute2","_image$data$attribute3","item","width","navigate","dispatch","cart","state","isHovered","setIsHovered","attributes","position","children","height","display","alignItems","justifyContent","backgroundColor","fileName","_jsxFileName","lineNumber","columnNumber","mt","variant","color","neutral","dark","fontWeight","isItemInCart","some","cartItem","id","category","price","name","image","imageUrl","data","formats","medium","url","handleAddToCart","count","onMouseEnter","onMouseLeave","style","transition","transform","boxShadow","alt","src","onClick","cursor","objectFit","left","top","padding","background","borderRadius","sx","primary","disabled","replace","str","toUpperCase","_c","$RefreshReg$"],"sources":["/Users/pablodurbano/Documents/ dev/Sprint.9-Ecommerce/client/src/components/Item.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Box, Typography, Button } from \"@mui/material\";\nimport { shades } from \"../theme\";\nimport { addToCart } from \"../state\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst Item = ({ item, width }) => {\n  // ✅ HOOKS SIEMPRE AL PRINCIPIO - MISMO ORDEN\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const cart = useSelector((state) => state.cart.cart);\n  const [isHovered, setIsHovered] = useState(false);\n\n  // ✅ VALIDACIÓN DESPUÉS DE LOS HOOKS\n  if (!item || !item.attributes) {\n    return (\n      <Box width={width || \"300px\"} position=\"relative\">\n        <Box \n          width=\"380px\" \n          height=\"380px\" \n          display=\"flex\" \n          alignItems=\"center\" \n          justifyContent=\"center\"\n          backgroundColor=\"#f5f5f5\"\n        >\n          <Typography>Loading...</Typography>\n        </Box>\n        <Box mt=\"3px\">\n          <Typography variant=\"subtitle2\" color={shades.neutral.dark}>\n            Loading...\n          </Typography>\n          <Typography>Loading item...</Typography>\n          <Typography fontWeight=\"bold\">€ --</Typography>\n        </Box>\n      </Box>\n    );\n  }\n\n  // ✅ DESTRUCTURING SEGURO DESPUÉS DE LA VALIDACIÓN\n  const isItemInCart = cart.some((cartItem) => cartItem.id === item.id);\n  const { \n    category = \"Unknown\", \n    price = 0, \n    name = \"Unnamed Item\", \n    image = {} \n  } = item.attributes;\n\n  // ✅ VALIDACIÓN SEGURA PARA LA IMAGEN\n  const imageUrl = image?.data?.attributes?.formats?.medium?.url \n    ? `http://localhost:1337${image.data.attributes.formats.medium.url}`\n    : \"/default-image.jpg\";\n\n  const handleAddToCart = () => {\n    if (!isItemInCart) {\n      dispatch(addToCart({ item: { ...item, count: 1 } }));\n    }\n  };\n\n  return (\n    <Box\n      width={width}\n      position=\"relative\"\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      style={{\n        transition: \"transform 0.3s, box-shadow 0.3s\",\n        transform: isHovered ? \"scale(1.05)\" : \"scale(1)\",\n        boxShadow: isHovered ? \"0 1px 2px rgba(0, 0, 0, 0.05)\" : \"none\",\n      }}\n    >\n      <img\n        alt={name}\n        width=\"380px\"\n        height=\"380px\"\n        src={imageUrl}\n        onClick={() => navigate(`/item/${item.id}`)}\n        style={{ cursor: \"pointer\", objectFit: \"cover\" }}\n      />\n      <Box\n        display={isHovered ? \"flex\" : \"none\"}\n        justifyContent=\"space-between\"\n        position=\"absolute\"\n        left=\"55%\"\n        top=\"-10%\"\n        width=\"100%\"\n        padding=\"0 5%\"\n        background={shades.neutral[100]}\n        borderRadius=\"3px\"\n        style={{ position: \"relative\" }}\n      >\n        <Button\n          onClick={handleAddToCart}\n          sx={{\n            backgroundColor: isItemInCart ? \"#999999\" : shades.primary[500],\n            color: \"white\",\n            cursor: isItemInCart ? \"default\" : \"pointer\",\n          }}\n          disabled={isItemInCart}\n        >\n          {isItemInCart ? \"In Cart\" : \"Add to Cart\"}\n        </Button>\n      </Box>\n\n      <Box mt=\"3px\">\n        <Typography variant=\"subtitle2\" color={shades.neutral.dark}>\n          {category\n            .replace(/([A-Z])/g, \" $1\")\n            .replace(/^./, (str) => str.toUpperCase())}\n        </Typography>\n        <Typography>{name}</Typography>\n        <Typography fontWeight=\"bold\">€ {price}</Typography>\n      </Box>\n    </Box>\n  );\n};\n\nexport default Item;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}